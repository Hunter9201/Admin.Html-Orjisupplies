<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Orji Supplies – Admin (Offline JSON Builder)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{--ink:#0f172a;--muted:#64748b;--line:#e2e8f0;--bg:#f8fafc;--brand:#0ea5e9}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:0;background:var(--bg);color:var(--ink)}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);padding:12px 16px;font-weight:800}
  main{max-width:1000px;margin:0 auto;padding:16px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .field{display:flex;flex-direction:column;gap:6px}
  input,textarea{padding:10px 12px;border:1px solid var(--line);border-radius:10px;font-size:16px}
  textarea{min-height:60px}
  .button{padding:10px 14px;border-radius:10px;border:1px solid var(--line);background:#fff;font-weight:700;cursor:pointer}
  .primary{background:var(--brand);border-color:var(--brand);color:#fff}
  .stack{display:flex;gap:8px;flex-wrap:wrap}
  .list{margin-top:16px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
  .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}
  .muted{color:var(--muted)}
  code{background:#fff;border:1px solid var(--line);padding:2px 6px;border-radius:6px}
  @media (max-width:720px){.row{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>Orji Supplies – Admin (Build products.json)</header>
<main>
  <p class="muted">Add items below. When done, click <strong>Download JSON</strong> and upload the file to your repo: <code>hunter9201/Orji-Supplies/products.json</code>.</p>

  <div class="row">
    <div class="field">
      <label>Name</label>
      <input id="name" placeholder="e.g., Harpic Power Plus 750ml" />
    </div>
    <div class="field">
      <label>Product ID (unique)</label>
      <input id="pid" placeholder="e.g., pHarpic750" />
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label>Retail Price (UGX)</label>
      <input id="retail" type="number" placeholder="e.g., 16000" />
    </div>
    <div class="field">
      <label>Wholesale Price (UGX)</label>
      <input id="wholesale" type="number" placeholder="e.g., 14000" />
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label>MOQ (wholesale minimum)</label>
      <input id="moq" type="number" placeholder="e.g., 12" />
    </div>
    <div class="field">
      <label>Unit</label>
      <input id="unit" placeholder="e.g., bottle, piece, can" />
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label>Category</label>
      <input id="category" placeholder="laundry | home | accessories | pest" />
    </div>
    <div class="field">
      <label>Tag (optional)</label>
      <input id="tag" placeholder="e.g., Bestseller, Top Brand" />
    </div>
  </div>

  <div class="field">
    <label>Description</label>
    <textarea id="desc" placeholder="Short description shown on the card"></textarea>
  </div>

  <div class="field">
    <label>Image URLs (one per line). You can mix full links (https://...) and simple filenames like <code>images/harpic.jpg</code></label>
    <textarea id="imgs" placeholder="https://.../photo1.jpg
https://.../photo2.jpg
images/localfile.jpg"></textarea>
  </div>

  <div class="stack">
    <button class="button" id="addBtn">Add / Update Item</button>
    <button class="button" id="clearForm">Clear Form</button>
    <button class="button primary" id="downloadBtn">Download JSON</button>
  </div>

  <div class="list" id="list"></div>
</main>

<script>
  const list = document.getElementById('list');
  const fields = {
    name: document.getElementById('name'),
    pid: document.getElementById('pid'),
    retail: document.getElementById('retail'),
    wholesale: document.getElementById('wholesale'),
    moq: document.getElementById('moq'),
    unit: document.getElementById('unit'),
    category: document.getElementById('category'),
    tag: document.getElementById('tag'),
    desc: document.getElementById('desc'),
    imgs: document.getElementById('imgs'),
  };

  let items = [];

  function renderList(){
    list.innerHTML = items.map(p=>{
      const price = new Intl.NumberFormat('en-UG',{style:'currency',currency:'UGX',maximumFractionDigits:0}).format(p.retailPrice);
      const thumb = (p.imgs && p.imgs[0]) ? p.imgs[0] : '';
      return `<div class="card">
        <div style="font-weight:800">${p.name}</div>
        <div class="muted" style="font-size:12px">${p.id}</div>
        ${thumb ? `<img src="${thumb}" alt="" style="width:100%;height:140px;object-fit:cover;border-radius:8px;margin:8px 0;border:1px solid #e2e8f0">` : ''}
        <div class="muted" style="min-height:32px">${p.desc||''}</div>
        <div style="margin:8px 0"><strong>${price}</strong> <span class="muted">/ ${p.unit||'piece'}</span></div>
        <div class="muted" style="font-size:12px">Wholesale: ${p.wholesalePrice} • MOQ ${p.moq||1}</div>
        <div class="muted" style="font-size:12px">Category: ${p.category||'-'} ${p.tag?('• '+p.tag):''}</div>
        <div class="stack" style="margin-top:8px">
          <button class="button" onclick='editItem("${p.id}")'>Edit</button>
          <button class="button" onclick='removeItem("${p.id}")'>Delete</button>
        </div>
      </div>`;
    }).join('');
  }

  function getForm(){
    const imgs = fields.imgs.value.split('\n').map(s=>s.trim()).filter(Boolean);
    return {
      id: fields.pid.value.trim(),
      name: fields.name.value.trim(),
      retailPrice: Number(fields.retail.value||0),
      wholesalePrice: Number(fields.wholesale.value||0),
      moq: Number(fields.moq.value||1),
      category: fields.category.value.trim(),
      unit: fields.unit.value.trim() || 'piece',
      tag: fields.tag.value.trim() || undefined,
      desc: fields.desc.value.trim(),
      imgs
    };
  }

  function setForm(p){
    fields.pid.value = p.id||'';
    fields.name.value = p.name||'';
    fields.retail.value = p.retailPrice||'';
    fields.wholesale.value = p.wholesalePrice||'';
    fields.moq.value = p.moq||'';
    fields.category.value = p.category||'';
    fields.unit.value = p.unit||'';
    fields.tag.value = p.tag||'';
    fields.desc.value = p.desc||'';
    fields.imgs.value = (p.imgs||[]).join('\n');
  }

  function editItem(id){
    const p = items.find(x=>x.id===id);
    if(p) setForm(p);
    window.scrollTo({top:0,behavior:'smooth'});
  }
  function removeItem(id){
    items = items.filter(x=>x.id!==id);
    renderList();
  }

  document.getElementById('addBtn').onclick = ()=>{
    const p = getForm();
    if(!p.id || !p.name){ alert('Please provide Product ID and Name.'); return; }
    const i = items.findIndex(x=>x.id===p.id);
    if(i>=0) items[i]=p; else items.push(p);
    renderList();
  };

  document.getElementById('clearForm').onclick = ()=> setForm({});

  document.getElementById('downloadBtn').onclick = ()=>{
    if(!items.length){ alert('No items yet. Add at least one.'); return; }
    const blob = new Blob([JSON.stringify(items,null,2)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'products.json';
    a.click();
    URL.revokeObjectURL(a.href);
  };

  // Prefill a sample
  items = [
    {
      id:"pBroom", name:"Assorted Color Broom Head",
      retailPrice:15000, wholesalePrice:12000, moq:10,
      category:"accessories", unit:"piece",
      desc:"Heavy-duty broom head in multiple colors. Fits standard handles.",
      imgs:["images/brooms.jpg"]
    },
    {
      id:"pHarpic", name:"Harpic Power Plus 10X (750ml)",
      retailPrice:16000, wholesalePrice:14000, moq:12,
      category:"home", unit:"bottle",
      desc:"Powerful toilet cleaner for tough stains and germs.",
      imgs:["https://images.unsplash.com/photo-1615486363873-5cc9c13ccd3d?q=80&w=800&auto=format&fit=crop"]
    }
  ];
  renderList();
</script>
</body>
</html>
